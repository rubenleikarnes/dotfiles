(()=>{"use strict";var t={2552:(t,e)=>{function r(t,e){return t.length===e.length&&(t===e||t.toLowerCase()===e.toLowerCase())}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldActivateForAuthority=e.onceSuccessfully=e.getRemoteName=e.AuthorityHierarchy=e.getDistroFromAuthority=e.isAuthorityWsl=e.getAuthorityFromDistro=e.isWSL1=e.isDockerDesktopDistro=e.isEqualAuthority=e.compareCaseInsensitive=void 0,e.compareCaseInsensitive=r,e.isEqualAuthority=function(t,e){return void 0===t?void 0===e:void 0!==e&&r(t,e)},e.isDockerDesktopDistro=function(t){return/^docker-desktop(-data)?$/.test(t)},e.isWSL1=function(t){return-1!==t.indexOf("Microsoft")},e.getAuthorityFromDistro=function(t="default",e){return e?`wsl+${t}@${e}`:"wsl+"+t},e.isAuthorityWsl=function(t){return t.startsWith("wsl+")},e.getDistroFromAuthority=function(t){let e,r;if(t.startsWith("wsl+")&&(e=t.substring(4)),!e)return;const s=e.indexOf("@"),o=e.indexOf("%40"),u=Math.min(-1===s?1/0:s,-1===o?1/0:o);return isFinite(u)&&(r=e.slice(u+1),e=e.slice(0,u)),"default"===e&&(e=void 0),{hostAuthority:r,distro:e}};class s{static parse(t){return new s(t,t.split(/@|%40/g).reverse())}get length(){return this.parts.length}get host(){return this.last.startsWith("wsl+")?1===this.parts.length?void 0:this.parts.slice(0,-1).reverse().join("@"):this.parts.slice().reverse().join("@")}get last(){return this.parts[this.parts.length-1]}constructor(t,e){this.value=t,this.parts=e}has(t){const e=t+"+";return this.parts.some((t=>t.startsWith(e)))}toString(){return this.parts.join(" > ")}}e.AuthorityHierarchy=s,e.getRemoteName=function(t){const e=t.indexOf("+");return-1!==e?t.substring(0,e):t},e.onceSuccessfully=function(t){let e;return()=>(void 0!==e||(e=t(),e.catch((()=>{e=void 0}))),e)},e.shouldActivateForAuthority=function(t,e){const r=["tunnel+","wsl+"];return!1!==t.workspace.getConfiguration("remote.SSH").get("useExecServer",!0)&&r.push("ssh-remote+"),r.some((t=>e.startsWith(t)))}},2613:t=>{t.exports=require("assert")}},e={};function r(s){var o=e[s];if(void 0!==o)return o.exports;var u=e[s]={exports:{}};return t[s](u,u.exports,r),u.exports}var s={};(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0});const e=r(2552),o=r(2613);suite("distro in authority",(()=>{test("default",(function(){o.equal((0,e.getAuthorityFromDistro)(),"wsl+default"),o.deepEqual((0,e.getDistroFromAuthority)("wsl+default"),{distro:void 0,hostAuthority:void 0})})),test("simple",(function(){o.equal((0,e.getAuthorityFromDistro)("ubuntu"),"wsl+ubuntu"),o.deepEqual((0,e.getDistroFromAuthority)("wsl+ubuntu"),{distro:"ubuntu",hostAuthority:void 0}),o.equal((0,e.getAuthorityFromDistro)("ubuntu-18.04"),"wsl+ubuntu-18.04"),o.deepEqual((0,e.getDistroFromAuthority)("wsl+ubuntu-18.04"),{distro:"ubuntu-18.04",hostAuthority:void 0})})),test("hosted",(function(){o.equal((0,e.getAuthorityFromDistro)("ubuntu","tunnel+surface"),"wsl+ubuntu@tunnel+surface"),o.deepEqual((0,e.getDistroFromAuthority)("wsl+ubuntu@tunnel+surface"),{distro:"ubuntu",hostAuthority:"tunnel+surface"}),o.equal((0,e.getAuthorityFromDistro)(void 0,"tunnel+surface"),"wsl+default@tunnel+surface"),o.deepEqual((0,e.getDistroFromAuthority)("wsl+default@tunnel+surface"),{distro:void 0,hostAuthority:"tunnel+surface"})}))}))})();var o=exports;for(var u in s)o[u]=s[u];s.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();
//# sourceMappingURL=utils.test.js.map